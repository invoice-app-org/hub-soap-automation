<!--
  SoaP Hub — Invoice to GST Filing (Dark)
  Dark-mode SVG architecture diagram with bent (orthogonal) connectors,
  AWS-inspired palette, and crisp typography.
  Notes:
  - Self-contained: no external fonts/assets; scalable vector.
  - Edit labels/positions by searching for each <g class="card" ...> block.
  - To export PNG: open in a browser and use print/export to PNG or use Inkscape.
-->
<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="1000" viewBox="0 0 1600 1000" style="--bg:#0b1220; --panel:#0f172a; --card:#0f1a33; --muted:#8ea1c1; --text:#e6eefc; --line:#2a3a64; --accent:#7aa2ff; --accent2:#8ef0d4; --warn:#f8d57e; --external:#7f4cff; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";">
  <defs>
    <!-- Drop shadow for cards -->
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#000" flood-opacity="0.45"/>
    </filter>

    <!-- Arrowhead marker -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="var(--accent)"/>
    </marker>

    <!-- Dashed arrow for observability/aux links -->
    <marker id="arrowDashed" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="var(--muted)"/>
    </marker>

    <!-- Card background gradient (subtle) -->
    <linearGradient id="cardGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#0f1a33"/>
      <stop offset="100%" stop-color="#0c1430"/>
    </linearGradient>

    <!-- Small service badge gradient -->
    <linearGradient id="badgeGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#2b4aa8"/>
      <stop offset="100%" stop-color="#1f3a8a"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect x="0" y="0" width="1600" height="1000" fill="var(--bg)"/>

  <!-- Title Bar -->
  <g transform="translate(40,24)">
    <text x="0" y="0" font-size="28" font-weight="700" fill="var(--text)">SoaP Hub — Invoice → GST Filing (Dark)</text>
    <text x="0" y="28" font-size="14" fill="var(--muted)">AWS-based reference with handwriting extraction, IRP integration, and observability</text>
  </g>

  <!-- Column labels -->
  <g font-size="12" fill="var(--muted)">
    <text x="40" y="70">Clients</text>
    <text x="420" y="70">Edge & Access</text>
    <text x="800" y="70">Application & Processing</text>
    <text x="1180" y="70">Data & Integrations</text>
  </g>

  <!-- Helper: function-like templating via comments (manual positions below) -->
  <!-- CARD: generic component -->
  <!--
    <g class="card" transform="translate(X,Y)">
      <rect width="W" height="H" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
      <g transform="translate(12,12)">
        <rect width="46" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
        <text x="23" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">TAG</text>
      </g>
      <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Title</text>
      <text x="16" y="74" font-size="13" fill="var(--muted)">Subtitle</text>
    </g>
  -->

  <!-- ===== Column 1: Clients ===== -->
  <g class="card" transform="translate(40,80)">
    <rect width="300" height="80" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="60" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="30" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">USERS</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Sellers / Admins</text>
    <text x="16" y="74" font-size="13" fill="var(--muted)">Browsers & Mobile Apps</text>
  </g>

  <g class="card" transform="translate(40,200)">
    <rect width="300" height="100" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="68" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="34" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">CLIENT</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Web / Mobile UI</text>
    <text x="16" y="74" font-size="13" fill="var(--muted)">React / Flutter (signed S3 uploads)</text>
  </g>

  <!-- ===== Column 2: Edge & Access ===== -->
  <g class="card" transform="translate(420,60)">
    <rect width="300" height="70" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="52" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="26" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">R53</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Amazon Route 53</text>
  </g>

  <g class="card" transform="translate(420,150)">
    <rect width="300" height="90" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="68" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="34" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">CF+WAF</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">CloudFront + AWS WAF</text>
    <text x="16" y="74" font-size="13" fill="var(--muted)">CDN, TLS, threat mitigation</text>
  </g>

  <g class="card" transform="translate(420,260)">
    <rect width="300" height="70" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="62" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="31" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">COG</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Amazon Cognito</text>
  </g>

  <!-- ===== Column 3: Application & Processing ===== -->
  <g class="card" transform="translate(800,80)">
    <rect width="320" height="80" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="64" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="32" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">APIGW</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Amazon API Gateway</text>
  </g>

  <g class="card" transform="translate(800,180)">
    <rect width="320" height="110" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="58" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="29" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">EKS</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">App Services (EKS/ECS)</text>
    <text x="16" y="74" font-size="13" fill="var(--muted)">Invoice, Validation, IRN status, Webhooks</text>
    <text x="16" y="94" font-size="13" fill="var(--muted)">Uses IAM, Secrets Manager</text>
  </g>

  <g class="card" transform="translate(800,310)">
    <rect width="320" height="70" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="50" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="25" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">SQS</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Amazon SQS (async)</text>
  </g>

  <g class="card" transform="translate(800,400)">
    <rect width="320" height="110" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="78" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="39" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">TXTRCT</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Amazon Textract + A2I</text>
    <text x="16" y="74" font-size="13" fill="var(--muted)">OCR + Handwriting; human review loop</text>
    <text x="16" y="94" font-size="13" fill="var(--muted)">Extract line-items, totals, GSTIN</text>
  </g>

  <g class="card" transform="translate(800,530)">
    <rect width="320" height="70" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="62" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="31" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">EB</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Amazon EventBridge</text>
  </g>

  <!-- ===== Column 4: Data & Integrations ===== -->
  <g class="card" transform="translate(1180,60)">
    <rect width="320" height="90" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="42" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="21" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">S3</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Amazon S3</text>
    <text x="16" y="74" font-size="13" fill="var(--muted)">Raw uploads, PDF renders, JSON</text>
  </g>

  <g class="card" transform="translate(1180,170)">
    <rect width="320" height="80" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="50" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="25" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">DDB</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Amazon DynamoDB</text>
    <text x="16" y="72" font-size="13" fill="var(--muted)">Invoice metadata/state</text>
  </g>

  <g class="card" transform="translate(1180,260)">
    <rect width="320" height="80" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="50" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="25" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">RDS</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Amazon RDS (Aurora)</text>
    <text x="16" y="72" font-size="13" fill="var(--muted)">Transactions & reporting</text>
  </g>

  <g class="card" transform="translate(1180,350)">
    <rect width="320" height="80" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="54" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="27" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">OS</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Amazon OpenSearch</text>
    <text x="16" y="72" font-size="13" fill="var(--muted)">Full‑text invoice search</text>
  </g>

  <g class="card" transform="translate(1180,450)">
    <rect width="320" height="90" rx="14" fill="url(#cardGrad)" stroke="var(--external)" stroke-width="1.6" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="50" height="22" rx="6" fill="url(#badgeGrad)" stroke="#a78bfa" stroke-width="1"/>
      <text x="25" y="16" text-anchor="middle" font-size="12" fill="#efe8ff" font-weight="700">IRP</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">e‑Invoice IRP (NIC / GSTN)</text>
    <text x="16" y="74" font-size="13" fill="var(--muted)">Generate IRN, QR, EWB; status poll</text>
  </g>

  <g class="card" transform="translate(1180,560)">
    <rect width="320" height="80" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="52" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="26" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">SES</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">Amazon SES / SNS</text>
    <text x="16" y="72" font-size="13" fill="var(--muted)">Email/SMS confirmations</text>
  </g>

  <g class="card" transform="translate(1180,650)">
    <rect width="320" height="80" rx="14" fill="url(#cardGrad)" stroke="var(--line)" stroke-width="1.2" filter="url(#shadow)"/>
    <g transform="translate(12,12)">
      <rect width="62" height="22" rx="6" fill="url(#badgeGrad)" stroke="#3b82f6" stroke-width="1"/>
      <text x="31" y="16" text-anchor="middle" font-size="12" fill="#eaf2ff" font-weight="700">OBS</text>
    </g>
    <text x="16" y="52" font-size="16" fill="var(--text)" font-weight="700">CloudWatch, X‑Ray</text>
    <text x="16" y="72" font-size="13" fill="var(--muted)">Metrics, logs, traces</text>
  </g>

  <!-- ===== Connectors (bent lines) ===== -->
  <g fill="none" stroke="var(--accent)" stroke-width="2" stroke-linejoin="round" marker-end="url(#arrow)">
    <!-- Users → CloudFront -->
    <path d="M340 120 L380 120 L380 195 L420 195"/>
    <!-- Web/Mobile → CloudFront -->
    <path d="M340 250 L380 250 L380 195 L420 195"/>
    <!-- CloudFront → API GW (via elbow) -->
    <path d="M720 195 L760 195 L760 120 L800 120"/>
    <!-- Cognito → API GW (token validation) -->
    <path d="M720 295 L760 295 L760 120 L800 120"/>
    <!-- API GW → App Services -->
    <path d="M960 160 L960 180"/>
    <!-- App Services → SQS -->
    <path d="M960 290 L960 310"/>
    <!-- SQS → Textract -->
    <path d="M960 380 L960 400"/>
    <!-- App Services → DynamoDB -->
    <path d="M1120 235 L1140 235 L1140 210 L1180 210"/>
    <!-- App Services → RDS -->
    <path d="M1120 235 L1140 235 L1140 300 L1180 300"/>
    <!-- Textract → S3 (extracted artifacts) -->
    <path d="M1120 455 L1140 455 L1140 105 L1180 105"/>
    <!-- App Services → IRP Integration -->
    <path d="M1120 235 L1140 235 L1140 495 L1180 495"/>
    <!-- EventBridge → SES/SNS (notifications fanout) -->
    <path d="M1120 565 L1140 565 L1140 600 L1180 600"/>
    <!-- App Services → OpenSearch (index docs) -->
    <path d="M1120 235 L1140 235 L1140 390 L1180 390"/>
    <!-- Client direct signed uploads → S3 -->
    <path d="M340 250 L360 250 L360 105 L1180 105"/>
  </g>

  <!-- Observability/aux dashed links -->
  <g fill="none" stroke="var(--muted)" stroke-width="1.8" stroke-dasharray="6 6" stroke-linejoin="round" marker-end="url(#arrowDashed)">
    <!-- API GW → Observability -->
    <path d="M1120 120 L1140 120 L1140 690 L1180 690"/>
    <!-- App Services → Observability -->
    <path d="M1120 235 L1140 235 L1140 690 L1180 690"/>
  </g>

  <!-- Legend -->
  <g transform="translate(40,860)">
    <rect width="670" height="110" rx="14" fill="var(--panel)" stroke="var(--line)" stroke-width="1.2"/>
    <text x="16" y="28" font-size="16" fill="var(--text)" font-weight="700">Legend</text>

    <g transform="translate(16,40)">
      <rect width="18" height="18" rx="4" fill="url(#cardGrad)" stroke="var(--line)"/>
      <text x="28" y="14" font-size="13" fill="var(--muted)">Internal component</text>
    </g>
    <g transform="translate(220,40)">
      <rect width="18" height="18" rx="4" fill="url(#cardGrad)" stroke="var(--external)" stroke-width="1.6"/>
      <text x="28" y="14" font-size="13" fill="var(--muted)">External service/integration</text>
    </g>
    <g transform="translate(16,72)">
      <path d="M0 9 L50 9" stroke="var(--accent)" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="60" y="13" font-size="13" fill="var(--muted)">Primary data/command flow (orthogonal)</text>
    </g>
    <g transform="translate(380,72)">
      <path d="M0 9 L50 9" stroke="var(--muted)" stroke-width="1.8" stroke-dasharray="6 6" marker-end="url(#arrowDashed)"/>
      <text x="60" y="13" font-size="13" fill="var(--muted)">Observability/auxiliary</text>
    </g>
  </g>

  <!-- Footer note -->
  <g transform="translate(40,990)">
    <text x="0" y="-16" font-size="12" fill="var(--muted)">Tip: duplicate this file and swap the palette for a Light variant (e.g., bg #ffffff, text #0b1220).</text>
  </g>
</svg>
